{"filter":false,"title":"user.rb","tooltip":"/app/models/user.rb","undoManager":{"mark":8,"position":8,"stack":[[{"start":{"row":0,"column":0},"end":{"row":3,"column":0},"action":"remove","lines":["class User < ApplicationRecord","  has_secure_password","end",""],"id":2},{"start":{"row":0,"column":0},"end":{"row":2,"column":4},"action":"insert","lines":["class User < ApplicationRecord","➤ validates :name, presence: true, uniqueness: true","has_"]}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":3},"action":"remove","lines":["➤ v"],"id":3}],[{"start":{"row":0,"column":0},"end":{"row":2,"column":4},"action":"remove","lines":["class User < ApplicationRecord","alidates :name, presence: true, uniqueness: true","has_"],"id":4},{"start":{"row":0,"column":0},"end":{"row":2,"column":19},"action":"insert","lines":["class User < ApplicationRecord","➤ validates :name, presence: true, uniqueness: true","has_secure_password"]}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":3},"action":"remove","lines":["➤ v"],"id":5}],[{"start":{"row":2,"column":19},"end":{"row":3,"column":0},"action":"insert","lines":["",""],"id":6}],[{"start":{"row":3,"column":0},"end":{"row":3,"column":1},"action":"insert","lines":["e"],"id":7}],[{"start":{"row":3,"column":1},"end":{"row":3,"column":2},"action":"insert","lines":["n"],"id":8}],[{"start":{"row":3,"column":2},"end":{"row":3,"column":3},"action":"insert","lines":["d"],"id":9}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":1},"action":"insert","lines":["v"],"id":10}],[{"start":{"row":0,"column":0},"end":{"row":3,"column":3},"action":"remove","lines":["class User < ApplicationRecord","validates :name, presence: true, uniqueness: true","has_secure_password","end"],"id":11},{"start":{"row":0,"column":0},"end":{"row":8,"column":3},"action":"insert","lines":["after_destroy :ensure_an_admin_remains","class Error < StandardError","end","private","def ensure_an_admin_remains","if User.count.zero?","raise Error.new \"Can't delete last user\"","end","end"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":3,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1512675314592,"hash":"6c2566d61b5ecf665eb386e8a2f58dbdb7f6591d"}